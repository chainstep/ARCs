<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="507px" preserveAspectRatio="none" style="width:843px;height:507px;background:#FFFFFF;" version="1.1" viewBox="0 0 843 507" width="843px" zoomAndPan="magnify"><defs><filter height="300%" id="f1wlcs4ajqb01n" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="336" x="250.25" y="29.4023">NFT Minting with Factory and rekeying</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="30" x2="30" y1="92.1758" y2="447.5918"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="88" x2="88" y1="92.1758" y2="447.5918"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="153" x2="153" y1="92.1758" y2="447.5918"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="237" x2="237" y1="92.1758" y2="447.5918"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="407.5" x2="407.5" y1="92.1758" y2="447.5918"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="578.5" x2="578.5" y1="92.1758" y2="447.5918"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="779.5" x2="779.5" y1="92.1758" y2="447.5918"/><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="47" x="5" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="12" y="77.2227">Alice</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="47" x="5" y="446.5918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="12" y="467.127">Alice</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="40" x="66" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="73" y="77.2227">Bob</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="40" x="66" y="446.5918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="73" y="467.127">Bob</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="63" x="120" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="127" y="77.2227">Charlie</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="63" x="120" y="446.5918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="127" y="467.127">Charlie</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="76" x="197" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="204" y="77.2227">Kollektor</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="76" x="197" y="446.5918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="204" y="467.127">Kollektor</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="155" x="328.5" y="40.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="335.5" y="60.7344">NFT Factory contract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="371.5" y="77.2227">(stateless)</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="155" x="328.5" y="446.5918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="335.5" y="467.127">NFT Factory contract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="371.5" y="483.6152">(stateless)</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="101" x="526.5" y="40.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="533.5" y="60.7344">NFT contract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="546.5" y="77.2227">(stateful)</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="101" x="526.5" y="446.5918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="533.5" y="467.127">NFT contract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="546.5" y="483.6152">(stateful)</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="99" x="728.5" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="735.5" y="77.2227">NFT account</text><rect fill="#FEFECE" filter="url(#f1wlcs4ajqb01n)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="99" x="728.5" y="446.5918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="735.5" y="467.127">NFT account</text><rect fill="#EEEEEE" filter="url(#f1wlcs4ajqb01n)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="836.5" x="0" y="122.8311"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="836.5" y1="122.8311" y2="122.8311"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="836.5" y1="125.8311" y2="125.8311"/><rect fill="#EEEEEE" filter="url(#f1wlcs4ajqb01n)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="78" x="379.25" y="112.1758"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60" x="385.25" y="128.7441">Mint NFT</text><polygon fill="#A80036" points="225,162.7969,235,166.7969,225,170.7969,229,166.7969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30.5" x2="231" y1="166.7969" y2="166.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="37.5" y="162.0547">create NFT</text><polygon fill="#A80036" points="396,192.1074,406,196.1074,396,200.1074,400,196.1074" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="237" x2="402" y1="196.1074" y2="196.1074"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="244" y="191.3652">mint NFT</text><polygon fill="#A80036" points="567,221.418,577,225.418,567,229.418,571,225.418" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="408" x2="573" y1="225.418" y2="225.418"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="415" y="220.6758">issue NFT contract</text><polygon fill="#A80036" points="768,250.7285,778,254.7285,768,258.7285,772,254.7285" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="774" y1="254.7285" y2="254.7285"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="586" y="249.9863">create NFT account</text><polygon fill="#A80036" points="768,280.0391,778,284.0391,768,288.0391,772,284.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="774" y1="284.0391" y2="284.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="586" y="279.2969">mint NFT (non-transferable)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="328.6602" y2="328.6602"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="328.6602" y2="341.6602"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="341.6602" y2="341.6602"/><polygon fill="#A80036" points="590,337.6602,580,341.6602,590,345.6602,586,341.6602" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="586" y="308.6074">store royalty conditions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="586" y="323.918">and address</text><polygon fill="#A80036" points="41.5,366.9707,31.5,370.9707,41.5,374.9707,37.5,370.9707" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35.5" x2="578" y1="370.9707" y2="370.9707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="47.5" y="366.2285">rekey NFT to alice account</text><polygon fill="#A80036" points="419,396.2813,409,400.2813,419,404.2813,415,400.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="413" x2="578" y1="400.2813" y2="400.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="425" y="395.5391">return contract address</text><polygon fill="#A80036" points="248,425.5918,238,429.5918,248,433.5918,244,429.5918" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242" x2="407" y1="429.5918" y2="429.5918"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="254" y="424.8496">return contract address</text><!--MD5=[0ed9ccb21f67b7239641f86de67641b9]
@startuml

title "NFT Minting with Factory and rekeying"

participant "Alice" as ali
participant "Bob" as bob
participant "Charlie" as cha
participant "Kollektor" as kol
participant "NFT Factory contract\n(stateless)" as fac
participant "NFT contract\n(stateful)" as nfc
participant "NFT account" as nfa


== Mint NFT ==

ali -> kol: create NFT
kol -> fac: mint NFT
fac -> nfc: issue NFT contract
nfc -> nfa: create NFT account
nfc -> nfa: mint NFT (non-transferable)
nfc -> nfc: store royalty conditions\nand address
nfc -> ali: rekey NFT to alice account
nfc -> fac: return contract address
fac -> kol: return contract address


@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>