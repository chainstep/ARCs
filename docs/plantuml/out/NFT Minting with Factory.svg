<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1297px" preserveAspectRatio="none" style="width:779px;height:1297px;background:#FFFFFF;" version="1.1" viewBox="0 0 779 1297" width="779px" zoomAndPan="magnify"><defs><filter height="300%" id="fyqurpe7krlhy" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="218" x="277" y="29.4023">NFT Minting with Factory</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="30" x2="30" y1="92.1758" y2="1237.4238"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="88" x2="88" y1="92.1758" y2="1237.4238"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="153" x2="153" y1="92.1758" y2="1237.4238"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="237" x2="237" y1="92.1758" y2="1237.4238"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="407.5" x2="407.5" y1="92.1758" y2="1237.4238"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="578.5" x2="578.5" y1="92.1758" y2="1237.4238"/><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="47" x="5" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="12" y="77.2227">Alice</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="47" x="5" y="1236.4238"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="12" y="1256.959">Alice</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="40" x="66" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="73" y="77.2227">Bob</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="40" x="66" y="1236.4238"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="73" y="1256.959">Bob</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="63" x="120" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="127" y="77.2227">Charlie</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="63" x="120" y="1236.4238"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="127" y="1256.959">Charlie</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="76" x="197" y="56.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="204" y="77.2227">Kollektor</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="76" x="197" y="1236.4238"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="204" y="1256.959">Kollektor</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="155" x="328.5" y="40.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="335.5" y="60.7344">NFT Factory contract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="371.5" y="77.2227">(stateless)</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="155" x="328.5" y="1236.4238"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="335.5" y="1256.959">NFT Factory contract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="371.5" y="1273.4473">(stateless)</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="101" x="526.5" y="40.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="533.5" y="60.7344">NFT contract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="546.5" y="77.2227">(stateful)</text><rect fill="#FEFECE" filter="url(#fyqurpe7krlhy)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="101" x="526.5" y="1236.4238"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="533.5" y="1256.959">NFT contract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="546.5" y="1273.4473">(stateful)</text><rect fill="#EEEEEE" filter="url(#fyqurpe7krlhy)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="772" x="0" y="122.8311"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="772" y1="122.8311" y2="122.8311"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="772" y1="125.8311" y2="125.8311"/><rect fill="#EEEEEE" filter="url(#fyqurpe7krlhy)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="78" x="347" y="112.1758"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60" x="353" y="128.7441">Mint NFT</text><polygon fill="#A80036" points="225,162.7969,235,166.7969,225,170.7969,229,166.7969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30.5" x2="231" y1="166.7969" y2="166.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="37.5" y="162.0547">create NFT</text><polygon fill="#A80036" points="396,192.1074,406,196.1074,396,200.1074,400,196.1074" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="237" x2="402" y1="196.1074" y2="196.1074"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="244" y="191.3652">mint NFT</text><polygon fill="#A80036" points="567,221.418,577,225.418,567,229.418,571,225.418" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="408" x2="573" y1="225.418" y2="225.418"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="415" y="220.6758">issue NFT contract</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="254.7285" y2="254.7285"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="254.7285" y2="267.7285"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="267.7285" y2="267.7285"/><polygon fill="#A80036" points="590,263.7285,580,267.7285,590,271.7285,586,267.7285" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="586" y="249.9863">mint NFT</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="297.0391" y2="297.0391"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="297.0391" y2="310.0391"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="310.0391" y2="310.0391"/><polygon fill="#A80036" points="590,306.0391,580,310.0391,590,314.0391,586,310.0391" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="586" y="292.2969">store royalty conditions</text><polygon fill="#A80036" points="41.5,350.6602,31.5,354.6602,41.5,358.6602,37.5,354.6602" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35.5" x2="578" y1="354.6602" y2="354.6602"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="47.5" y="334.6074">send NFT to alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="47.5" y="349.918">via clawback address</text><polygon fill="#A80036" points="419,379.9707,409,383.9707,419,387.9707,415,383.9707" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="413" x2="578" y1="383.9707" y2="383.9707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="425" y="379.2285">return contract address</text><polygon fill="#A80036" points="248,409.2813,238,413.2813,248,417.2813,244,413.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242" x2="407" y1="413.2813" y2="413.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="254" y="408.5391">return contract address</text><rect fill="#EEEEEE" filter="url(#fyqurpe7krlhy)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="772" x="0" y="441.9365"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="772" y1="441.9365" y2="441.9365"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="772" y1="444.9365" y2="444.9365"/><rect fill="#EEEEEE" filter="url(#fyqurpe7krlhy)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="121" x="325.5" y="431.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103" x="331.5" y="447.8496">First NFT Trade</text><polygon fill="#A80036" points="567,481.9023,577,485.9023,567,489.9023,571,485.9023" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30.5" x2="573" y1="485.9023" y2="485.9023"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="37.5" y="481.1602">sell NFT</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="515.2129" y2="515.2129"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="515.2129" y2="528.2129"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="528.2129" y2="528.2129"/><polygon fill="#A80036" points="590,524.2129,580,528.2129,590,532.2129,586,528.2129" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="586" y="510.4707">store NFT state to SELLABLE</text><polygon fill="#A80036" points="567,553.5234,577,557.5234,567,561.5234,571,557.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88" x2="573" y1="557.5234" y2="557.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="95" y="552.7813">buy alice`s NFT</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="586.834" y2="586.834"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="586.834" y2="599.834"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="599.834" y2="599.834"/><polygon fill="#A80036" points="590,595.834,580,599.834,590,603.834,586,599.834" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="586" y="582.0918">check if NFT is sellable</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="629.1445" y2="629.1445"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="629.1445" y2="642.1445"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="642.1445" y2="642.1445"/><polygon fill="#A80036" points="590,638.1445,580,642.1445,590,646.1445,586,642.1445" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="586" y="624.4023">get royalty conditions</text><polygon fill="#A80036" points="567,667.4551,577,671.4551,567,675.4551,571,671.4551" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30.5" x2="573" y1="671.4551" y2="671.4551"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="37.5" y="666.7129">transfer NFT</text><polygon fill="#A80036" points="99,696.7656,89,700.7656,99,704.7656,95,700.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="93" x2="578" y1="700.7656" y2="700.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="105" y="696.0234">transfer NFT</text><polygon fill="#A80036" points="41.5,726.0762,31.5,730.0762,41.5,734.0762,37.5,730.0762" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35.5" x2="578" y1="730.0762" y2="730.0762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="47.5" y="725.334">send funds</text><polygon fill="#A80036" points="248,755.3867,238,759.3867,248,763.3867,244,759.3867" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242" x2="578" y1="759.3867" y2="759.3867"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="254" y="754.6445">send funds</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="788.6973" y2="788.6973"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="788.6973" y2="801.6973"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="801.6973" y2="801.6973"/><polygon fill="#A80036" points="590,797.6973,580,801.6973,590,805.6973,586,801.6973" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="586" y="783.9551">update NFT state to LOCKED</text><rect fill="#EEEEEE" filter="url(#fyqurpe7krlhy)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="772" x="0" y="830.3525"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="772" y1="830.3525" y2="830.3525"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="772" y1="833.3525" y2="833.3525"/><rect fill="#EEEEEE" filter="url(#fyqurpe7krlhy)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="162" x="305" y="819.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="311" y="836.2656">Secondary NFT Trade</text><polygon fill="#A80036" points="567,870.3184,577,874.3184,567,878.3184,571,874.3184" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88" x2="573" y1="874.3184" y2="874.3184"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="95" y="869.5762">sell NFT</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="903.6289" y2="903.6289"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="903.6289" y2="916.6289"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="916.6289" y2="916.6289"/><polygon fill="#A80036" points="590,912.6289,580,916.6289,590,920.6289,586,916.6289" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="586" y="898.8867">store NFT state to SELLABLE</text><polygon fill="#A80036" points="567,941.9395,577,945.9395,567,949.9395,571,945.9395" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="153.5" x2="573" y1="945.9395" y2="945.9395"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="160.5" y="941.1973">buy bob`s NFT</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="975.25" y2="975.25"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="975.25" y2="988.25"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="988.25" y2="988.25"/><polygon fill="#A80036" points="590,984.25,580,988.25,590,992.25,586,988.25" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="586" y="970.5078">check if NFT is sellable</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="1017.5605" y2="1017.5605"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="1017.5605" y2="1030.5605"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="1030.5605" y2="1030.5605"/><polygon fill="#A80036" points="590,1026.5605,580,1030.5605,590,1034.5605,586,1030.5605" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="586" y="1012.8184">get royalty conditions</text><polygon fill="#A80036" points="567,1055.8711,577,1059.8711,567,1063.8711,571,1059.8711" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88" x2="573" y1="1059.8711" y2="1059.8711"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="95" y="1055.1289">transfer NFT</text><polygon fill="#A80036" points="164.5,1085.1816,154.5,1089.1816,164.5,1093.1816,160.5,1089.1816" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="578" y1="1089.1816" y2="1089.1816"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="170.5" y="1084.4395">transfer NFT</text><polygon fill="#A80036" points="41.5,1114.4922,31.5,1118.4922,41.5,1122.4922,37.5,1118.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35.5" x2="578" y1="1118.4922" y2="1118.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="47.5" y="1113.75">send funds</text><polygon fill="#A80036" points="99,1143.8027,89,1147.8027,99,1151.8027,95,1147.8027" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="93" x2="578" y1="1147.8027" y2="1147.8027"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="105" y="1143.0605">send funds</text><polygon fill="#A80036" points="248,1173.1133,238,1177.1133,248,1181.1133,244,1177.1133" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242" x2="578" y1="1177.1133" y2="1177.1133"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="254" y="1172.3711">send funds</text><line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="621" y1="1206.4238" y2="1206.4238"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621" x2="621" y1="1206.4238" y2="1219.4238"/><line style="stroke:#A80036;stroke-width:1.0;" x1="580" x2="621" y1="1219.4238" y2="1219.4238"/><polygon fill="#A80036" points="590,1215.4238,580,1219.4238,590,1223.4238,586,1219.4238" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="586" y="1201.6816">update NFT state to LOCKED</text><!--MD5=[eda00e6cbd6979c9476237bdad479daf]
@startuml

title "NFT Minting with Factory"

participant "Alice" as ali
participant "Bob" as bob
participant "Charlie" as cha
participant "Kollektor" as kol
participant "NFT Factory contract\n(stateless)" as fac
participant "NFT contract\n(stateful)" as nfc


== Mint NFT ==

ali -> kol: create NFT
kol -> fac: mint NFT
fac -> nfc: issue NFT contract
nfc -> nfc: mint NFT
nfc -> nfc: store royalty conditions
nfc -> ali: send NFT to alice\nvia clawback address
nfc -> fac: return contract address
fac -> kol: return contract address


== First NFT Trade ==

ali -> nfc: sell NFT
nfc -> nfc: store NFT state to SELLABLE
bob -> nfc: buy alice`s NFT
nfc -> nfc: check if NFT is sellable
nfc -> nfc: get royalty conditions
ali -> nfc: transfer NFT
nfc -> bob: transfer NFT
nfc -> ali: send funds
nfc -> kol: send funds
nfc -> nfc: update NFT state to LOCKED


== Secondary NFT Trade ==

bob -> nfc: sell NFT
nfc -> nfc: store NFT state to SELLABLE
cha -> nfc: buy bob`s NFT
nfc -> nfc: check if NFT is sellable
nfc -> nfc: get royalty conditions
bob -> nfc: transfer NFT
nfc -> cha: transfer NFT
nfc -> ali: send funds
nfc -> bob: send funds
nfc -> kol: send funds
nfc -> nfc: update NFT state to LOCKED


@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>